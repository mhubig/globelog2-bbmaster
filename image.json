{
  "variables": {
    "ssh_pub_key": "~/.ssh/id_docker.pub"
  },

  "builders": [{
      "type": "digitalocean",
      "image_id": 1015253,
      "region_id": 4,
      "size_id": 66,
      "snapshot_name": "docker {{timestamp}}",
      "droplet_name": "docker"
    }],

  "provisioners": [
    {
        "type": "file",
        "source": "{{user `ssh_pub_key`}}",
        "destination": "/tmp/ssh_key.pub"
    },
    {
      "type": "shell",
      "scripts": [
        "script/base.sh",
        "script/vagrant.sh",
        "script/kernel.sh",
        "script/docker.sh"],
      "execute_command":
        "chmod +x {{ .Path }}; {{ .Vars }} sudo -E '{{ .Path }}'"
  }],

  "post-processors": [{
      "type": "vagrant",
      "output": "docker_{{.Provider}}.box"
    }]
}
